{"version":3,"sources":["../../src/pages/order-detail/order-detail.module.ts","../../src/pages/order-detail/order-detail.ts"],"names":[],"mappings":"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","file":"0.main.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { OrderDetail } from './order-detail';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    OrderDetail,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(OrderDetail)\r\n  ],\r\n  exports: [\r\n    OrderDetail\r\n  ]\r\n})\r\nexport class OrderDetailModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/order-detail/order-detail.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, AlertController, NavController, NavParams } from 'ionic-angular';\r\n\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { AngularFireDatabase, FirebaseListObservable, FirebaseObjectObservable } from 'angularfire2/database';\r\nimport { AngularFireAuth } from 'angularfire2/auth';\r\nimport * as firebase from 'firebase/app';\r\n\r\n@IonicPage()\r\n@Component({\r\n    selector: 'page-order-detail',\r\n    templateUrl: 'order-detail.html',\r\n})\r\n\r\nexport class OrderDetail {\r\n    order;\r\n    user: Observable<firebase.User>;\r\n    orders: FirebaseListObservable<any[]>;\r\n    totalarray: FirebaseListObservable<any[]>;\r\n    startstoparray: FirebaseListObservable<any[]>;\r\n    status: FirebaseObjectObservable<any>;\r\n    email;\r\n    profile;\r\n    TaskKey;\r\n    user_id;\r\n    startarray;\r\n    stoparray;\r\n    displayName;\r\n    objectID;\r\n    matchObj;\r\n    total;\r\n    timeStatus;\r\n    secUnits: boolean;\r\n    minUnits: boolean;\r\n    hourUnits: boolean;\r\n\r\n    constructor(public alertCtrl: AlertController, public navCtrl: NavController, public navParams: NavParams, private db: AngularFireDatabase, private afAuth: AngularFireAuth) {\r\n\r\n        afAuth.authState.subscribe(user => {\r\n            if (!user) {\r\n                this.displayName = null;\r\n                this.email = null;\r\n                this.user_id = null;\r\n                return;\r\n            }\r\n            this.displayName = user.displayName;\r\n            this.email = user.email;\r\n            this.user_id = user.uid;\r\n            this.order = navParams.get('order');\r\n            this.orders = db.list('/orders/' + this.user_id);\r\n            this.startstoparray = this.db.list('/startstop/' + this.user_id, {\r\n                query: {\r\n                    orderByChild: 'objectID',\r\n                    equalTo: this.order.$key\r\n                }\r\n            });\r\n            this.startstoparray.subscribe((obj) => {\r\n                this.startarray = obj;\r\n            }\r\n            )\r\n            this.status = db.object('/status/' + this.user_id);\r\n            this.status.subscribe((obj) => {\r\n                this.timeStatus = obj;\r\n                if (this.timeStatus.status === 'minutes') {\r\n                    this.secUnits = false;\r\n                    this.minUnits = true;\r\n                    this.hourUnits = false;\r\n                }\r\n                else if (this.timeStatus.status === 'seconds') {\r\n                    this.secUnits = true;\r\n                    this.minUnits = false;\r\n                    this.hourUnits = false;\r\n                }\r\n                else if (this.timeStatus.status === 'hours') {\r\n                    this.secUnits = false;\r\n                    this.minUnits = false;\r\n                    this.hourUnits = true;\r\n                }\r\n            }\r\n            )\r\n            this.addDifferences()\r\n        });\r\n    }\r\n    secondsTimeUnit() {\r\n        this.status.update({\r\n            status: 'seconds'\r\n        });\r\n    }\r\n    minutesTimeUnit() {\r\n        this.status.update({\r\n            status: 'minutes'\r\n        });\r\n    }\r\n    hoursTimeUnit() {\r\n        this.status.update({\r\n            status: 'hours'\r\n        });\r\n    }\r\n    addDifferences() {\r\n        let sum = 0;\r\n        this.startstoparray.subscribe((obj) => {\r\n            for (let i = 0; i < obj.length; i++) {\r\n                let dif = obj[i].stopTimeunix - obj[i].startTimeunix;\r\n                sum = sum + dif;\r\n            }\r\n            this.total = sum;\r\n        });\r\n    }\r\n    removeStartStop(key: string, start, stop) {\r\n        let confirm = this.alertCtrl.create({\r\n            title: 'Delete this job time keeper?',\r\n            message: 'Permanently remove order from ' + start + ' to ' + stop,\r\n            buttons: [\r\n                {\r\n                    text: 'cancel',\r\n                    handler: () => {\r\n                        console.log('cancel');\r\n                    }\r\n                },\r\n                {\r\n                    text: 'Yes! Delete this order',\r\n                    handler: () => {\r\n                        this.delete(key);\r\n                        console.log('Agree clicked');\r\n                    }\r\n                }\r\n            ]\r\n        });\r\n        confirm.present();\r\n    }\r\n    delete(key) {\r\n    this.startstoparray.remove(key);\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/order-detail/order-detail.ts"],"sourceRoot":""}